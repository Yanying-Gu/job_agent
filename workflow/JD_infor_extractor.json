{
  "name": "JD_infor_extractor",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -128,
        416
      ],
      "id": "ce2bd311-fa1e-401c-9e8e-cba26e80cb4d",
      "name": "When chat message received",
      "webhookId": "d1bdbf79-8e5c-4ac7-96bf-7228d8b7eab8"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are an information extraction assistant. Read the job description text provided in the <job_description> section. Respond with a single JSON object using the exact keys below:\n\n{\n  \"job title\": \"\",\n  \"Responsibility\": \"\",\n  \"Required Relevant Experience (Years)\": null,\n  \"Required Seniority Level\": \"\",\n  \"Relevant Field of Study/Major\": \"\",\n  \"Required Language(s) and Proficiency Level\": \"\",\n  \"Specific Required Skills/Keywords\": \"\",\n  \"Target Job Industry/Sector\": \"\",\n  \"Behavioral requirement\": \"\",\n  \"Company Values\": \"\",\n  \"Company name\": \"\"\n}\n\nExtraction guidelines:\n- Preserve bullet content and line breaks where present in the source; use \"\\n\\n\" between bullet sections to mirror paragraphs.\n- If the description lacks information for a field, leave the value as an empty string, and use null for numeric fields when unknown.\n- Normalize counts to integers (e.g., \"7+ years\" → 7). If a range appears, choose the minimum.\n- Keep wording faithful to the source; do not paraphrase unless you must resolve formatting.\n\nReturn only the JSON—no markdown, commentary, or backticks.\n\n<job_description>\n{{ $json.chatInput }}\n</job_description>\n\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        144,
        416
      ],
      "id": "f4753ee1-93fd-461e-b273-71bac36f857f",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "id"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -48,
        624
      ],
      "id": "2144988c-7b6b-482d-b3aa-4936db5013b2",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "4lQiD09ZknJtbyVj",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "/job_agent_data/job_description.json",
        "options": {
          "append": false
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        832,
        416
      ],
      "id": "4c043ae3-1ba1-4d01-a264-8fcc62931c08",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "operation": "toJson",
        "options": {
          "fileName": "job_description.json"
        }
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        624,
        416
      ],
      "id": "b5397040-8715-4849-9d5b-1e2f750571a9",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "language": "python",
        "pythonCode": "# item[\"output\"] is a escaped JSON, not a real dictionary\n# JSON data is stored inside a string, not as structured JSON\n# Need to unescape JSON\nimport json\n\nparsed_items = []\n\nfor item in _input.all():  # list of input items\n    data = item.get(\"json\", {})   # grab the nested json dict\n    raw_output = data.get(\"output\", \"\")  # now 'output' exists\n    if not raw_output:\n        parsed_items.append({\"raw_output\": \"MISSING\"})\n        continue\n    try:\n        parsed = json.loads(raw_output)  # convert string to dict\n        parsed_items.append(parsed)\n    except json.JSONDecodeError:\n        parsed_items.append({\"raw_output\": raw_output})\n\n# Return structured JSON back to n8n\nreturn parsed_items\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        448,
        416
      ],
      "id": "f22d7fc9-36ca-47ec-a3d4-32835ea36e53",
      "name": "Code in Python (Beta)"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code in Python (Beta)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in Python (Beta)": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "aa930281-1685-4cc1-aaee-a62ff27b60c7",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "b39098fa88d73a08861a2351c14a261cf9e6ae11855154e6a59e69c1890b07c6"
  },
  "id": "vFkoQtaC3V177bTm",
  "tags": []
}